<div class="button">
  <button mat-raised-button color="primary" (click)="drawer.toggle()">
    Faire une demande d'absence
  </button>
</div>
<mat-drawer-container>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="date_start">
        <th mat-header-cell *matHeaderCellDef>Date de début</th>
        <td mat-cell *matCellDef="let element">{{ element.date_start }}</td>
      </ng-container>

      <ng-container matColumnDef="date_end">
        <th mat-header-cell *matHeaderCellDef>Date de fin</th>
        <td mat-cell *matCellDef="let element">{{ element.date_end }}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let element">
          {{ getStringType(element.type) }}
        </td>
      </ng-container>

      <ng-container matColumnDef="reason">
        <th mat-header-cell *matHeaderCellDef>Motif</th>
        <td mat-cell *matCellDef="let element">{{ element.reason }}</td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Statut</th>
        <td mat-cell *matCellDef="let element">
          {{ getStringStatus(element.status) }}
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 50]"
      showFirstLastButtons
    ></mat-paginator>
  </div>

  <div class="balance paid-vacations">Solde congés payés : 10</div>
  <div class="balance rtt">Solde RTT : 7</div>

  <mat-drawer #drawer class="example-sidenav" mode="side" position="end">
    <form id="form-auth" [formGroup]="form" (submit)="onSubmit()">
      <h1>Demande d'absence</h1>
      <p>
        <mat-form-field appearance="fill">
          <mat-label>Entrer une plage de dates</mat-label>
          <mat-date-range-input [rangePicker]="picker">
            <input
              matStartDate
              placeholder="Date début"
              formControlName="date_start"
            />
            <input
              matEndDate
              placeholder="Date fin"
              formControlName="date_end"
            />
          </mat-date-range-input>
          <mat-hint>MM/JJ/AAAA – MM/JJ/AAAA</mat-hint>
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
        </mat-form-field>
      </p>
      <p>
        <mat-form-field appearance="fill">
          <mat-label>Type d'absence</mat-label>
          <mat-select formControlName="type" [(ngModel)]="selectedValue">
            <mat-option
              *ngFor="let type of types | keyvalue"
              [value]="type.key"
            >
              {{ type.value }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </p>
      <p *ngIf="selectedValue === 'CONGES_SANS_SOLDE'">
        <mat-form-field appearance="outline">
          <mat-label>Motif</mat-label>
          <input matInput placeholder="" id="reason" formControlName="reason" />
        </mat-form-field>
      </p>
      <button mat-raised-button>Envoyer la demande</button>
    </form>
  </mat-drawer>
</mat-drawer-container>
